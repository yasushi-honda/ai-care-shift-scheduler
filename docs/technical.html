<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - é–‹ç™ºè€…å‘ã‘</title>
    <meta name="description" content="Phase 25 ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ã®æŠ€è¡“è©³ç´°ã¨ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ é›†">

    <!-- Cayman Theme CSS -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            color: #606c71;
        }
        .page-header {
            color: #fff;
            text-align: center;
            background-color: #155799;
            background-image: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #155799 100%);
            padding: 3rem 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .project-name {
            margin-top: 0;
            margin-bottom: 0.1rem;
            font-size: 2.25rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .project-tagline {
            margin-bottom: 2rem;
            font-weight: normal;
            opacity: 0.95;
            font-size: 1.25rem;
            color: #e8f4f8;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .main-content {
            max-width: 64rem;
            padding: 2rem 1rem;
            margin: 0 auto;
            font-size: 1.1rem;
        }
        h1, h2, h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #0366d6;
        }
        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; }
        h3 { font-size: 1.5rem; }
        hr {
            height: 2px;
            padding: 0;
            margin: 2rem 0;
            background-color: #eff0f1;
            border: 0;
        }
        a {
            color: #1e6bb8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        strong {
            font-weight: bold;
        }
        .mermaid {
            background: #f6f8fa;
            border: 1px solid #d1d5da;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            overflow-x: auto;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .mermaid:hover {
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        /* å¤§ããªå›³ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .mermaid-large {
            overflow-x: scroll;
            max-width: 100%;
        }
        .mermaid-large svg {
            min-width: 1200px;
        }
        /* ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºç”¨ */
        .mermaid-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .mermaid-modal-content {
            margin: 2% auto;
            display: block;
            width: 95%;
            max-width: 95%;
        }
        .mermaid-modal-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        .mermaid-modal-close:hover {
            color: #bbb;
        }
        .zoom-hint {
            font-size: 0.9rem;
            color: #586069;
            font-style: italic;
            margin-top: 0.5rem;
            text-align: center;
        }
        .site-footer {
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: solid 1px #eff0f1;
            text-align: center;
            font-size: 0.9rem;
        }
    </style>

    <!-- Mermaid -->
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

      // Wait for DOM to be fully loaded
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initMermaid);
      } else {
        initMermaid();
      }

      function initMermaid() {
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default',
          securityLevel: 'loose',
          flowchart: {
            useMaxWidth: false,
            htmlLabels: true,
            nodeSpacing: 80,
            rankSpacing: 80
          },
          gantt: {
            useMaxWidth: false
          }
        });
        mermaid.run().then(() => {
          // WBSå›³ã‚’å¤§ããè¡¨ç¤º
          const headings = document.querySelectorAll('h2');
          let wbsDiagram = null;
          headings.forEach(h => {
            if (h.textContent.includes('WBS')) {
              wbsDiagram = h;
            }
          });

          if (wbsDiagram) {
            let nextElement = wbsDiagram.nextElementSibling;
            while (nextElement) {
              if (nextElement.classList && nextElement.classList.contains('mermaid')) {
                nextElement.classList.add('mermaid-large');
                break;
              }
              nextElement = nextElement.nextElementSibling;
            }
          }

          // ã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§è¡¨ç¤º
          setupZoomableImages();
        });
      }

      function setupZoomableImages() {
        const modal = document.createElement('div');
        modal.className = 'mermaid-modal';
        modal.innerHTML = '<span class="mermaid-modal-close">&times;</span><div class="mermaid-modal-content"></div>';
        document.body.appendChild(modal);

        const closeBtn = modal.querySelector('.mermaid-modal-close');
        const modalContent = modal.querySelector('.mermaid-modal-content');

        document.querySelectorAll('.mermaid').forEach(diagram => {
          diagram.addEventListener('click', function() {
            const svg = this.querySelector('svg');
            if (svg) {
              modalContent.innerHTML = '';
              modalContent.appendChild(svg.cloneNode(true));
              modal.style.display = 'block';
            }
          });
        });

        closeBtn.onclick = () => modal.style.display = 'none';
        modal.onclick = (e) => {
          if (e.target === modal) modal.style.display = 'none';
        };
      }
    </script>
</head>
<body>
    <header class="page-header" role="banner">
        <h1 class="project-name">æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h1>
        <h2 class="project-tagline">é–‹ç™ºè€…å‘ã‘</h2>
    </header>

    <main class="main-content" role="main">
        <h1>æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰</h1>

        <p>Phase 25 ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ã®æŠ€è¡“è©³ç´°ã¨ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ é›†ã§ã™ã€‚</p>

        <hr>

        <h2>WBSï¼ˆä½œæ¥­åˆ†è§£æ§‹é€ ï¼‰</h2>

        <div class="mermaid">
graph TB
    A[Phase 25.2.5<br/>ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„]

    A --> B[Task 1<br/>å€‹åˆ¥ã€Œäºˆå®šã¨åŒã˜ã€ãƒœã‚¿ãƒ³]
    A --> C[Task 2<br/>ä¸€æ‹¬äºˆå®šâ†’å®Ÿç¸¾ã‚³ãƒ”ãƒ¼]
    A --> D[Task 3<br/>ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯å³æ™‚ã‚³ãƒ”ãƒ¼<br/>æœªå®Ÿè£…]

    B --> B1[è¨­è¨ˆãƒ»ä»•æ§˜ç¢ºèª]
    B --> B2[copyPlannedToActualå®Ÿè£…]
    B --> B3[CopyPlannedToActualButtonå®Ÿè£…]
    B --> B4[ActualShiftInputModalçµ±åˆ]
    B --> B5[TypeScriptå‹ãƒã‚§ãƒƒã‚¯]
    B --> B6[ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ]
    B --> B7[CodeRabbitãƒ¬ãƒ“ãƒ¥ãƒ¼]
    B --> B8[Gitç®¡ç†]

    C --> C1[è¨­è¨ˆãƒ»ä»•æ§˜ç¢ºèª]
    C --> C2[bulkCopyPlannedToActualå®Ÿè£…]
    C --> C3[BulkCopyPlannedToActualModalå®Ÿè£…]
    C --> C4[App.tsxçµ±åˆ]
    C --> C5[ShiftTable.tsxãƒœã‚¿ãƒ³è¿½åŠ ]
    C --> C6[TypeScriptå‹ãƒã‚§ãƒƒã‚¯]
    C --> C7[ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ]
    C --> C8[CodeRabbitãƒ¬ãƒ“ãƒ¥ãƒ¼<br/>4å›ãƒ»9ä»¶å¯¾å¿œ]
    C --> C9[Gitç®¡ç†ãƒ»CI/CD]

    D --> D1[UIè¨­è¨ˆ]
    D --> D2[ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å®Ÿè£…]
    D --> D3[ãƒ¢ãƒ¼ãƒ€ãƒ«æ”¹ä¿®]
    D --> D4[E2Eãƒ†ã‚¹ãƒˆ]

    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#FFE4B5
        </div>
        <p class="zoom-hint">ğŸ’¡ å›³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§è¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆæ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§å…¨ä½“ã‚’ç¢ºèªã§ãã¾ã™ï¼‰</p>

        <hr>

        <h2>ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆï¼ˆå®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰</h2>

        <div class="mermaid">
gantt
    title Phase 25 ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    dateFormat YYYY-MM-DD

    section ä¼ç”»ãƒ»ææ¡ˆ
    ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ææ¡ˆä½œæˆ : done, proposal, 2025-11-23, 1d

    section Phase 25.2.5 Task 1
    è¨­è¨ˆãƒ»ä»•æ§˜ç¢ºèª : done, task1-design, 2025-11-23, 2h
    copyPlannedToActualå®Ÿè£… : done, task1-util, after task1-design, 1h
    CopyPlannedToActualButtonå®Ÿè£… : done, task1-comp, after task1-util, 1h
    ActualShiftInputModalçµ±åˆ : done, task1-modal, after task1-comp, 1h
    TypeScriptå‹ãƒã‚§ãƒƒã‚¯ : done, task1-ts, after task1-modal, 30m
    ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ : done, task1-test, after task1-ts, 30m
    CodeRabbitãƒ¬ãƒ“ãƒ¥ãƒ¼ : done, task1-review, after task1-test, 30m
    Gitç®¡ç†ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ : done, task1-deploy, after task1-review, 30m

    section Phase 25.2.5 Task 2
    è¨­è¨ˆãƒ»ä»•æ§˜ç¢ºèª : done, task2-design, 2025-11-24, 1h
    bulkCopyPlannedToActualå®Ÿè£… : done, task2-util, after task2-design, 1h
    BulkCopyPlannedToActualModalå®Ÿè£… : done, task2-modal, after task2-util, 2h
    App.tsxçµ±åˆ : done, task2-app, after task2-modal, 1h
    ShiftTable.tsxãƒœã‚¿ãƒ³è¿½åŠ  : done, task2-table, after task2-app, 30m
    TypeScriptå‹ãƒã‚§ãƒƒã‚¯ : done, task2-ts, after task2-table, 30m
    ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ : done, task2-test, after task2-ts, 30m
    CodeRabbitãƒ¬ãƒ“ãƒ¥ãƒ¼1 : done, task2-review1, after task2-test, 30m
    ä¿®æ­£ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼2-4 : done, task2-review2, after task2-review1, 2h
    Gitç®¡ç†ãƒ»CI/CD : done, task2-deploy, after task2-review2, 30m
        </div>

        <hr>

        <h2>ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³</h2>

        <div class="mermaid">
graph TB
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤"
        U[ãƒ¦ãƒ¼ã‚¶ãƒ¼<br/>æ–½è¨­ç®¡ç†è€…ãƒ»ã‚¹ã‚¿ãƒƒãƒ•]
    end

    subgraph "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        ST[ShiftTable<br/>ã‚·ãƒ•ãƒˆè¡¨ç¤º]
        ASIM[ActualShiftInputModal<br/>å€‹åˆ¥å®Ÿç¸¾å…¥åŠ›]
        BCPAM[BulkCopyPlannedToActualModal<br/>ä¸€æ‹¬ã‚³ãƒ”ãƒ¼]
        CPTAB[CopyPlannedToActualButton<br/>ã€Œäºˆå®šã¨åŒã˜ã€ãƒœã‚¿ãƒ³]
    end

    subgraph "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        APP[App.tsx<br/>çŠ¶æ…‹ç®¡ç†ãƒ»ãƒãƒ³ãƒ‰ãƒ©]
    end

    subgraph "ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤"
        CPTAUtil[copyPlannedToActual<br/>å€‹åˆ¥ã‚³ãƒ”ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯]
        BCPTAUtil[bulkCopyPlannedToActual<br/>ä¸€æ‹¬ã‚³ãƒ”ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯]
        GUACUtil[getUnfilledActualCount<br/>æœªå…¥åŠ›ä»¶æ•°è¨ˆç®—]
    end

    subgraph "ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤"
        SS[ScheduleService<br/>Firestoreæ“ä½œ]
    end

    subgraph "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å±¤"
        FS[(Cloud Firestore<br/>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿)]
    end

    U -->|æ“ä½œ| ST
    U -->|ã‚¯ãƒªãƒƒã‚¯| CPTAB
    U -->|ã‚¯ãƒªãƒƒã‚¯| BCPAM

    ST -->|ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º| ASIM
    ST -->|ãƒœã‚¿ãƒ³è¡¨ç¤º| CPTAB
    ST -->|ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º| BCPAM

    ASIM -->|ã‚³ãƒ”ãƒ¼å®Ÿè¡Œ| APP
    CPTAB -->|ã‚³ãƒ”ãƒ¼å®Ÿè¡Œ| CPTAUtil
    BCPAM -->|ä¸€æ‹¬ã‚³ãƒ”ãƒ¼å®Ÿè¡Œ| APP

    APP -->|å€‹åˆ¥ã‚³ãƒ”ãƒ¼| CPTAUtil
    APP -->|ä¸€æ‹¬ã‚³ãƒ”ãƒ¼| BCPTAUtil
    APP -->|ä¿å­˜| SS

    BCPAM -->|æœªå…¥åŠ›ä»¶æ•°å–å¾—| GUACUtil

    CPTAUtil -->|ã‚·ãƒ•ãƒˆãƒ‡ãƒ¼ã‚¿å¤‰æ›| APP
    BCPTAUtil -->|ã‚·ãƒ•ãƒˆãƒ‡ãƒ¼ã‚¿å¤‰æ›| APP
    GUACUtil -->|ä»¶æ•°è¨ˆç®—| BCPAM

    SS -->|CRUDæ“ä½œ| FS

    style U fill:#E6F3FF
    style ST fill:#FFE6F0
    style ASIM fill:#FFE6F0
    style BCPAM fill:#FFE6F0
    style CPTAB fill:#FFE6F0
    style APP fill:#FFF4E6
    style CPTAUtil fill:#F0FFE6
    style BCPTAUtil fill:#F0FFE6
    style GUACUtil fill:#F0FFE6
    style SS fill:#E6F0FF
    style FS fill:#F0E6FF
        </div>

        <hr>

        <h2>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³</h2>

        <div class="mermaid">
sequenceDiagram
    actor User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant ST as ShiftTable
    participant BCPAM as BulkCopyModal
    participant APP as App.tsx
    participant Util as bulkCopyUtil
    participant SS as ScheduleService
    participant FS as Firestore

    User->>ST: ã€Œäºˆå®šã‚’å®Ÿç¸¾ã«ã‚³ãƒ”ãƒ¼ã€ã‚¯ãƒªãƒƒã‚¯
    ST->>APP: onBulkCopyClick()
    APP->>BCPAM: ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

    BCPAM->>BCPAM: æœªå…¥åŠ›ã‚¹ã‚¿ãƒƒãƒ•è‡ªå‹•é¸æŠ
    BCPAM-->>User: ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

    User->>BCPAM: ã‚¹ã‚¿ãƒƒãƒ•é¸æŠãƒ»å®Ÿè¡Œ
    BCPAM->>APP: onExecute(options)

    APP->>Util: bulkCopyPlannedToActual()
    Util-->>APP: updatedSchedule

    APP->>APP: setSchedule(æ¥½è¦³çš„UIæ›´æ–°)

    APP->>SS: updateSchedule()
    SS->>FS: Firestoreã«ä¿å­˜
    FS-->>SS: ä¿å­˜æˆåŠŸ
    SS-->>APP: success

    APP->>APP: showSuccess()
    APP->>APP: ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
    APP-->>User: æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

    Note over APP,FS: ã‚¨ãƒ©ãƒ¼æ™‚ã¯rollback
        </div>

        <hr>

        <h2>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢ä¿‚å›³</h2>

        <div class="mermaid">
graph LR
    subgraph "App.tsxï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰"
        APP[App Component<br/>- schedule<br/>- bulkCopyModalOpen<br/>- handleBulkCopyExecute]
    end

    subgraph "ShiftTable.tsx"
        ST[ShiftTable<br/>- onBulkCopyClick]
        STButton[ä¸€æ‹¬ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³]
    end

    subgraph "BulkCopyModal"
        BCPAM[BulkCopyPlannedToActualModal<br/>- schedules<br/>- targetMonth<br/>- onExecute]
    end

    subgraph "ActualShiftInputModal"
        ASIM[ActualShiftInputModal]
        ASIMButton[CopyPlannedToActualButton]
    end

    subgraph "Utilities"
        BCPTAUtil[bulkCopyPlannedToActual]
        CPTAUtil[copyPlannedToActual]
        GUACUtil[getUnfilledActualCount]
    end

    APP -->|props| ST
    ST -->|render| STButton
    STButton -->|onClick| APP

    APP -->|props| BCPAM
    BCPAM -->|onExecute| APP

    APP -->|props| ASIM
    ASIM -->|render| ASIMButton

    BCPAM -->|import| GUACUtil
    BCPAM -->|import| BCPTAUtil
    APP -->|import| BCPTAUtil
    APP -->|import| CPTAUtil

    style APP fill:#FFF4E6
    style ST fill:#FFE6F0
    style BCPAM fill:#FFE6F0
    style ASIM fill:#FFE6F0
    style BCPTAUtil fill:#F0FFE6
    style CPTAUtil fill:#F0FFE6
    style GUACUtil fill:#F0FFE6
        </div>

        <hr>

        <h2>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼</h2>

        <div class="mermaid">
flowchart TD
    Start([ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚·ãƒ•ãƒˆè¡¨ã‚’è¡¨ç¤º])

    Start --> ShowButton["ã€Œäºˆå®šã‚’å®Ÿç¸¾ã«ã‚³ãƒ”ãƒ¼ã€<br/>ãƒœã‚¿ãƒ³è¡¨ç¤º"]
    ShowButton --> ClickButton{ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯}
    ClickButton -->|ã‚¯ãƒªãƒƒã‚¯| OpenModal[ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º]

    OpenModal --> AutoSelect[æœªå…¥åŠ›ã‚¹ã‚¿ãƒƒãƒ•ã‚’<br/>è‡ªå‹•é¸æŠ]
    AutoSelect --> ShowStaffList[ã‚¹ã‚¿ãƒƒãƒ•é¸æŠãƒªã‚¹ãƒˆè¡¨ç¤º]

    ShowStaffList --> UserSelect{ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠ}
    UserSelect -->|å€‹åˆ¥é¸æŠ| UpdateSelection[é¸æŠçŠ¶æ…‹æ›´æ–°]
    UserSelect -->|ã™ã¹ã¦é¸æŠ| ToggleAll[å…¨é¸æŠ/å…¨è§£é™¤]
    UpdateSelection --> ShowStaffList
    ToggleAll --> ShowStaffList

    UserSelect -->|å®Ÿè¡Œã‚¯ãƒªãƒƒã‚¯| ValidateSelection{é¸æŠã‚¹ã‚¿ãƒƒãƒ•<br/>1åä»¥ä¸Šï¼Ÿ}
    ValidateSelection -->|ã„ã„ãˆ| ShowError[ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    ShowError --> ShowStaffList

    ValidateSelection -->|ã¯ã„| ShowConfirm[ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°]
    ShowConfirm --> UserConfirm{ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª}
    UserConfirm -->|ã‚­ãƒ£ãƒ³ã‚»ãƒ«| ShowStaffList
    UserConfirm -->|OK| ExecuteCopy[ä¸€æ‹¬ã‚³ãƒ”ãƒ¼å®Ÿè¡Œ]

    ExecuteCopy --> UpdateUI[UIçŠ¶æ…‹æ›´æ–°]
    UpdateUI --> SaveFirestore[Firestoreã«ä¿å­˜]
    SaveFirestore --> CheckResult{ä¿å­˜æˆåŠŸï¼Ÿ}

    CheckResult -->|ã¯ã„| ShowSuccess[æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    ShowSuccess --> CloseModal[ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹]
    CloseModal --> End([å®Œäº†])

    CheckResult -->|ã„ã„ãˆ| Rollback[çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯]
    Rollback --> ShowSaveError[ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    ShowSaveError --> EndError([çµ‚äº†: ã‚¨ãƒ©ãƒ¼])

    style Start fill:#E6F3FF
    style End fill:#90EE90
    style EndError fill:#FFB6C1
        </div>

        <hr>

        <p><a href="index.html">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a></p>

        <footer class="site-footer">
            <p><strong>æœ€çµ‚æ›´æ–°</strong>: 2025å¹´11æœˆ24æ—¥</p>
        </footer>
    </main>
</body>
</html>
