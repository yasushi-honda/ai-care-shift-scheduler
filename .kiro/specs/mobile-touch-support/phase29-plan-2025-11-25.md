# Phase 29: ãƒ¢ãƒã‚¤ãƒ«ã‚¿ãƒƒãƒå¯¾å¿œ

**ä½œæˆæ—¥**: 2025-11-25
**ä»•æ§˜ID**: mobile-touch-support
**Phase**: 29
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”„ å®Ÿè£…ä¸­

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

Phase 28ã§å®Ÿè£…ã—ãŸãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ©Ÿèƒ½ã‚’ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã®ã‚¿ãƒƒãƒæ“ä½œã«å¯¾å¿œã•ã›ã¾ã™ã€‚ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§ã‚·ãƒ•ãƒˆã‚¿ã‚¤ãƒ—ã‚’ã‚µã‚¤ã‚¯ãƒ«åˆ‡ã‚Šæ›¿ãˆã€ã‚·ãƒ³ã‚°ãƒ«ã‚¿ãƒƒãƒ—ã§ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ç›®æ¨™

- âœ… ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§ã‚·ãƒ•ãƒˆã‚¿ã‚¤ãƒ—ã‚’ã‚µã‚¤ã‚¯ãƒ«åˆ‡ã‚Šæ›¿ãˆ
- âœ… ã‚·ãƒ³ã‚°ãƒ«ã‚¿ãƒƒãƒ—ã§ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
- âœ… PC/ãƒ¢ãƒã‚¤ãƒ«ä¸¡å¯¾å¿œï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ï¼‰
- âœ… ã‚¿ãƒƒãƒãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆè¦–è¦šçš„åå¿œï¼‰

---

## ç¾çŠ¶åˆ†æ

### Phase 28å®Ÿè£…ï¼ˆãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆï¼‰

```typescript
// ç¾åœ¨ã®ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š
const handleCellClick = (/* params */) => {
  if (clickTimerRef.current[cellKey]) {
    // ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
    clearTimeout(clickTimerRef.current[cellKey]!);
    handleDoubleClick(/* params */);
  } else {
    // ã‚·ãƒ³ã‚°ãƒ«ã‚¯ãƒªãƒƒã‚¯ï¼ˆé…å»¶å®Ÿè¡Œï¼‰
    clickTimerRef.current[cellKey] = setTimeout(/* ... */, 250);
  }
};
```

### å•é¡Œç‚¹

1. `onClick`ã¯ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã§ãƒ¢ãƒã‚¤ãƒ«ã§ã‚‚å‹•ä½œã™ã‚‹ãŒã€ã‚¿ãƒƒãƒå›ºæœ‰ã®å•é¡ŒãŒã‚ã‚‹
2. ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—æ¤œå‡ºãŒä¸å®‰å®šãªå¯èƒ½æ€§
3. ã‚¿ãƒƒãƒãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒãªã„

---

## æŠ€è¡“è¨­è¨ˆ

### 1. ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆå¯¾å¿œ

**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: `onClick`ã®ã¿ã§å¯¾å¿œï¼ˆReactæ¨™æº–ï¼‰

ãƒ¢ãƒã‚¤ãƒ«ã§ã¯`onClick`ãŒã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã«å¤‰æ›ã•ã‚Œã‚‹ãŸã‚ã€ç¾çŠ¶ã®ã‚³ãƒ¼ãƒ‰ã§ã‚‚å‹•ä½œã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚ãŸã ã—ã€ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

1. **ã‚¿ãƒƒãƒ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: `active:`çŠ¶æ…‹ã§ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å¤‰åŒ–
2. **ã‚¿ãƒƒãƒé…å»¶é˜²æ­¢**: `touch-action: manipulation`
3. **ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ é˜²æ­¢**: CSSã§å¯¾å¿œ

### 2. CSSå¯¾å¿œ

```css
/* ã‚¿ãƒƒãƒæœ€é©åŒ– */
.shift-cell {
  touch-action: manipulation; /* ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ ç„¡åŠ¹ */
  -webkit-tap-highlight-color: transparent; /* ã‚¿ãƒƒãƒ—ãƒã‚¤ãƒ©ã‚¤ãƒˆç„¡åŠ¹ */
  user-select: none; /* é¸æŠç„¡åŠ¹ */
}

/* ã‚¿ãƒƒãƒ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
.shift-cell:active {
  transform: scale(0.95);
  opacity: 0.8;
}
```

### 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤‰æ›´

**ShiftTable.tsx:**
- ã‚»ãƒ«ã«ã‚¿ãƒƒãƒæœ€é©åŒ–ã‚¯ãƒ©ã‚¹è¿½åŠ 
- `active:`ç–‘ä¼¼ã‚¯ãƒ©ã‚¹ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

---

## WBSï¼ˆä½œæ¥­åˆ†è§£å›³ï¼‰

```mermaid
graph TD
    A[Phase 29: ãƒ¢ãƒã‚¤ãƒ«ã‚¿ãƒƒãƒå¯¾å¿œ] --> B[29.1 è¨ˆç”»ãƒ»è¨­è¨ˆ]
    A --> C[29.2 CSSå¯¾å¿œ]
    A --> D[29.3 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£]
    A --> E[29.4 E2Eãƒ†ã‚¹ãƒˆ]
    A --> F[29.5 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™]

    B --> B1[ç¾çŠ¶åˆ†æ]
    B --> B2[æŠ€è¡“è¨­è¨ˆ]
    B --> B3[WBSä½œæˆ]

    C --> C1[ã‚¿ãƒƒãƒæœ€é©åŒ–CSS]
    C --> C2[ã‚¿ãƒƒãƒ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]

    D --> D1[ã‚»ãƒ«ã‚¯ãƒ©ã‚¹è¿½åŠ ]
    D --> D2[å‹•ä½œæ¤œè¨¼]

    E --> E1[ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆè¿½åŠ ]
    E --> E2[æ—¢å­˜ãƒ†ã‚¹ãƒˆç¢ºèª]

    F --> F1[å®Œäº†è¨˜éŒ²]
    F --> F2[Mermaidå›³]
```

---

## ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆ

```mermaid
gantt
    title Phase 29 å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    dateFormat HH:mm
    axisFormat %H:%M

    section è¨ˆç”»ãƒ»è¨­è¨ˆ
    ç¾çŠ¶åˆ†æ           :done, a1, 00:00, 10m
    æŠ€è¡“è¨­è¨ˆ           :done, a2, after a1, 10m
    WBSä½œæˆ            :done, a3, after a2, 10m

    section CSSå¯¾å¿œ
    ã‚¿ãƒƒãƒæœ€é©åŒ–CSS    :b1, after a3, 15m
    ã‚¿ãƒƒãƒ—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ :b2, after b1, 10m

    section ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£
    ã‚»ãƒ«ã‚¯ãƒ©ã‚¹è¿½åŠ      :c1, after b2, 15m
    å‹•ä½œæ¤œè¨¼           :c2, after c1, 10m

    section E2Eãƒ†ã‚¹ãƒˆ
    ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆè¿½åŠ  :d1, after c2, 20m
    æ—¢å­˜ãƒ†ã‚¹ãƒˆç¢ºèª     :d2, after d1, 10m

    section å®Œäº†å‡¦ç†
    ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™   :e1, after d2, 15m
    Git push           :e2, after e1, 5m
```

---

## æˆåŠŸåŸºæº–

### æ©Ÿèƒ½è¦ä»¶

- [ ] ãƒ¢ãƒã‚¤ãƒ«ã§ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—â†’ã‚·ãƒ•ãƒˆã‚µã‚¤ã‚¯ãƒ«
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã§ã‚·ãƒ³ã‚°ãƒ«ã‚¿ãƒƒãƒ—â†’ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
- [ ] ã‚¿ãƒƒãƒ—æ™‚ã®è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### éæ©Ÿèƒ½è¦ä»¶

- [ ] PCã§ã®æ—¢å­˜å‹•ä½œç¶­æŒ
- [ ] E2Eãƒ†ã‚¹ãƒˆé€šé
- [ ] TypeScriptã‚¨ãƒ©ãƒ¼ãªã—

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Phase 28å®Œäº†è¨˜éŒ²](../double-click-shift-edit/phase28-completion-2025-11-25.md)
- [ShiftTable.tsx](../../../components/ShiftTable.tsx)
