# Phase 42: UIデザイン改善 - 要件定義

**作成日**: 2025-12-06
**ステータス**: ドラフト
**優先度**: 中

---

## 1. 概要

### 1.1 背景
現在のUI（ヘッダーナビゲーション、アクションボタンエリア）において、以下の問題が指摘されている：

1. **視覚的一貫性の欠如**: ボタンの色・サイズ・間隔が不統一
2. **認知負荷の増大**: 4色以上のボタンが混在し、ユーザーの判断を遅延させる
3. **アイコンスタイルの混在**: 絵文字とSVGアイコンが混在

### 1.2 目的
- UIコンポーネントのデザインを統一し、プロフェッショナルな印象を与える
- ユーザーの認知負荷を軽減し、操作性を向上させる
- アクセシビリティ基準（WCAG 2.1 AA）を維持

### 1.3 スコープ
| 対象 | 含む | 含まない |
|------|------|----------|
| ヘッダーナビゲーション | ✅ | |
| アクションボタンエリア | ✅ | |
| 左パネル（Accordion） | | ❌（今回対象外） |
| シフト表本体 | | ❌（今回対象外） |

---

## 2. 機能要件

### FR-1: デザイントークンの統一

**要件ID**: FR-1
**優先度**: 高

| 項目 | 要件 |
|------|------|
| カラーパレット | プライマリ（Indigo）、サクセス（Emerald）、ニュートラル（Gray）の3系統に統一 |
| ボタンサイズ | sm (32px), md (40px), lg (48px) の3サイズを定義 |
| 間隔 | gap-2 (8px) を標準とする |
| 角丸 | rounded-lg (8px) を標準とする |

### FR-2: Buttonコンポーネントの拡張

**要件ID**: FR-2
**優先度**: 高

| バリアント | 用途 | スタイル |
|------------|------|----------|
| primary | 主要アクション（デモシフト作成） | bg-indigo-600, text-white |
| secondary | 副次アクション（下書き保存） | bg-gray-100, text-gray-700 |
| success | 確定アクション | bg-emerald-600, text-white |
| ghost | 控えめなアクション（履歴） | bg-transparent, text-gray-600 |
| outline | エクスポート系 | border-gray-300, text-gray-700 |

### FR-3: IconButtonコンポーネントの新規作成

**要件ID**: FR-3
**優先度**: 中

| 項目 | 要件 |
|------|------|
| サイズ | 40x40px（タッチターゲット44px確保のため内部パディング含む） |
| ホバー | 背景色変化 + tooltipでラベル表示 |
| アイコン | Heroicons (24x24px) を使用 |

### FR-4: ヘッダーナビゲーションの改善

**要件ID**: FR-4
**優先度**: 中

**現状**:
```
📊 レポート | 📖 マニュアル | ⚙️ 管理 | ログアウト
```

**要件**:
1. アイコンボタン化（ラベルをtooltipに移動）
2. 統一されたアイコンスタイル（Heroicons）
3. 等幅・等間隔での配置
4. ホバー時の視覚的フィードバック強化

### FR-5: アクションボタンエリアの改善

**要件ID**: FR-5
**優先度**: 高

**現状**:
```
[デモシフト作成] [下書き保存] [確定] [バージョン履歴] [CSV形式でダウンロード]
```

**要件**:
1. ボタンを機能グループごとに視覚的に分離
   - 編集グループ: デモシフト作成、下書き保存、確定
   - ユーティリティグループ: 履歴、CSV
2. 各ボタンに適切なvariantを適用
3. ラベルを短縮（例: "CSV形式でダウンロード" → "CSV"）
4. 等幅または最小幅を設定し、サイズを揃える

---

## 3. 非機能要件

### NFR-1: アクセシビリティ

| 項目 | 基準 |
|------|------|
| コントラスト比 | WCAG AA (4.5:1) 以上 |
| タッチターゲット | 44x44px 以上 |
| フォーカス表示 | 明確なフォーカスリング |
| スクリーンリーダー | aria-label対応 |

### NFR-2: パフォーマンス

| 項目 | 基準 |
|------|------|
| 追加バンドルサイズ | 10KB以下（gzip） |
| 既存機能への影響 | なし |

### NFR-3: 保守性

| 項目 | 基準 |
|------|------|
| コンポーネント分離 | 再利用可能な形で実装 |
| デザイントークン | tailwind.config.jsで一元管理 |

---

## 4. 受け入れ条件

### AC-1: ヘッダーナビゲーション
- [ ] 4つのナビゲーション項目がアイコンボタンとして表示される
- [ ] ホバー時にtooltipでラベルが表示される
- [ ] 等幅・等間隔で配置されている
- [ ] キーボードナビゲーションが可能

### AC-2: アクションボタンエリア
- [ ] ボタンが2グループに視覚的に分離されている
- [ ] 各ボタンのvariantが適切（primary/secondary/success/ghost/outline）
- [ ] ボタンサイズが統一されている（最小幅または等幅）
- [ ] 無効状態が明確に表示される

### AC-3: デザイン全体
- [ ] 3色以内のカラーパレットで統一されている
- [ ] 絵文字が排除され、SVGアイコンに統一されている
- [ ] 既存のE2Eテストがパスする
- [ ] WCAG AA基準を満たしている

---

## 5. 除外事項

以下は今回のスコープに含まない：
- 左パネル（Accordion、スタッフ設定、シフト種別設定など）
- シフト表のセルデザイン
- モバイルレスポンシブ対応の抜本的改善
- ダークモード対応

---

## 6. リスクと軽減策

| リスク | 影響 | 軽減策 |
|--------|------|--------|
| 既存E2Eテストの破損 | 中 | テストセレクタの確認、data-testid属性の維持 |
| ユーザーの混乱 | 低 | 機能自体は変更なし、見た目のみ改善 |
| 追加工数の発生 | 低 | スコープを限定（ヘッダー、アクションボタンのみ） |

---

## 7. 関連ドキュメント

- [デザイン検討会議議事録](./design-review-meeting-2025-12-06.md)
- [技術設計書](./design.md)（作成予定）
- [タスク一覧](./tasks.md)（作成予定）
