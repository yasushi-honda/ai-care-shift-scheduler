# Phase 14.3 æ‰‹å‹•ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ï¼šRBACæ¨©é™ãƒã‚§ãƒƒã‚¯æ¤œè¨¼

**ä½œæˆæ—¥**: 2025å¹´11æœˆ2æ—¥
**ä»•æ§˜ID**: auth-data-persistence
**Phase**: Phase 14.3ï¼ˆRBACæ¨©é™ãƒã‚§ãƒƒã‚¯E2Eãƒ†ã‚¹ãƒˆï¼‰
**å¯¾è±¡ç’°å¢ƒ**: æœ¬ç•ªç’°å¢ƒï¼ˆhttps://ai-care-shift-scheduler.web.appï¼‰
**è¨€èª**: æ—¥æœ¬èª

---

## ğŸ“‹ ç›®çš„

ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’æ‰‹å‹•ã§æ¤œè¨¼ã—ã¾ã™ã€‚æœ¬ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦æ¤œè¨¼ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã§ã€Phase 14.3ã®è¦ä»¶ï¼ˆRequirements 2.1-2.15, 12.1-12.18ï¼‰ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚

---

## ğŸ¯ æ¤œè¨¼é …ç›®

1. **super-adminæ¨©é™ã®æ¤œè¨¼**ï¼ˆå…¨æ¨©é™ï¼‰
2. **adminæ¨©é™ã®æ¤œè¨¼**ï¼ˆæ–½è¨­ç®¡ç†ã€ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ï¼‰
3. **editoræ¨©é™ã®æ¤œè¨¼**ï¼ˆã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ã€ã‚¹ã‚¿ãƒƒãƒ•é–²è¦§ï¼‰
4. **vieweræ¨©é™ã®æ¤œè¨¼**ï¼ˆé–²è¦§ã®ã¿ï¼‰
5. **æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¤œè¨¼**ï¼ˆForbiddenãƒšãƒ¼ã‚¸è¡¨ç¤ºï¼‰

---

## âœ… æ¤œè¨¼æ‰‹é †

### å‰ææ¡ä»¶: ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æº–å‚™

**Phase 14.1ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ã‚’å…ˆã«å®Œäº†ã—ã¦ãã ã•ã„**:
- åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆsuper-adminï¼‰ã®ä½œæˆ
- 2äººç›®ä»¥é™ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
- æ‹›å¾…æ©Ÿèƒ½ã§ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ä»˜ä¸

**å¿…è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼**:
1. **super-adminãƒ¦ãƒ¼ã‚¶ãƒ¼** - Phase 14.1ã§ä½œæˆæ¸ˆã¿
2. **adminãƒ¦ãƒ¼ã‚¶ãƒ¼** - super-adminãŒæ‹›å¾…ã—ã¦adminæ¨©é™ã‚’ä»˜ä¸
3. **editorãƒ¦ãƒ¼ã‚¶ãƒ¼** - adminã¾ãŸã¯super-adminãŒæ‹›å¾…ã—ã¦editoræ¨©é™ã‚’ä»˜ä¸
4. **viewerãƒ¦ãƒ¼ã‚¶ãƒ¼** - adminã¾ãŸã¯super-adminãŒæ‹›å¾…ã—ã¦vieweræ¨©é™ã‚’ä»˜ä¸
5. **æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼** - 2äººç›®ã¨ã—ã¦ä½œæˆã—ã€æ‹›å¾…ãªã—

---

### æ¤œè¨¼1: super-adminæ¨©é™ã®æ¤œè¨¼

**ç›®çš„**: super-adminãŒã™ã¹ã¦ã®æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

#### æ‰‹é †

1. **super-adminã§ãƒ­ã‚°ã‚¤ãƒ³**
   - [ ] Phase 14.1ã§ä½œæˆã—ãŸsuper-adminã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   - [ ] ãƒ¡ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

2. **ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª**
   - [ ] ç”»é¢ä¸Šéƒ¨ã«ã€Œç®¡ç†ã€ã¾ãŸã¯ã€ŒAdminã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œç®¡ç†ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] `/admin` ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œæ–½è¨­ç®¡ç†ã€ã‚¿ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€ã‚¿ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

3. **æ–½è¨­ç®¡ç†æ©Ÿèƒ½ç¢ºèª**
   - [ ] ã€Œæ–½è¨­ç®¡ç†ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] å…¨æ–½è¨­ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œæ–°è¦æ–½è¨­ä½œæˆã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ãƒ†ã‚¹ãƒˆæ–½è¨­ã‚’ä½œæˆï¼ˆæ–½è¨­å: ã€ŒPhase14.3æ¤œè¨¼ç”¨æ–½è¨­ã€ï¼‰
   - [ ] ä½œæˆã—ãŸæ–½è¨­ãŒä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] æ–½è¨­ã®è©³ç´°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] æ–½è¨­æƒ…å ±ã®ç·¨é›†ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ç¢ºèª**
   - [ ] ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆemail, name, facilitiesé…åˆ—ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

5. **å…¨æ–½è¨­ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª**
   - [ ] å·¦ä¸Šã®æ–½è¨­é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‹ã
   - [ ] ã™ã¹ã¦ã®æ–½è¨­ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ä»»æ„ã®æ–½è¨­ã‚’é¸æŠ
   - [ ] ãã®æ–½è¨­ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ã‚¿ãƒƒãƒ•ã€ã‚·ãƒ•ãƒˆï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…çµæœ

- âœ… ç®¡ç†ç”»é¢ï¼ˆ/adminï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹
- âœ… æ–½è¨­ç®¡ç†æ©Ÿèƒ½ã§ã™ã¹ã¦ã®æ–½è¨­ã‚’ç®¡ç†ã§ãã‚‹
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ã§ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç®¡ç†ã§ãã‚‹
- âœ… ã™ã¹ã¦ã®æ–½è¨­ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹

---

### æ¤œè¨¼2: adminæ¨©é™ã®æ¤œè¨¼

**ç›®çš„**: adminãŒè‡ªåˆ†ã®æ–½è¨­ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã§ãã€ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

#### å‰ææ¡ä»¶

- [ ] super-adminã§æ–½è¨­ã‚’ä½œæˆæ¸ˆã¿ï¼ˆæ–½è¨­å: ã€Œadminæ¤œè¨¼ç”¨æ–½è¨­ã€ï¼‰
- [ ] super-adminãŒadminæ¨©é™ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ‹›å¾…æ¸ˆã¿

#### æ‰‹é †

1. **adminã§ãƒ­ã‚°ã‚¤ãƒ³**
   - [ ] adminã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   - [ ] è‡ªåˆ†ã®æ–½è¨­ï¼ˆã€Œadminæ¤œè¨¼ç”¨æ–½è¨­ã€ï¼‰ãŒè‡ªå‹•çš„ã«é¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

2. **ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã®ç¢ºèª**
   - [ ] ç”»é¢ä¸Šéƒ¨ã«ã€Œç®¡ç†ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
   - [ ] URLãƒãƒ¼ã«ç›´æ¥ `/admin` ã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã®ç¢ºèª**
   - [ ] ã€Œã‚·ãƒ•ãƒˆä½œæˆå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ãƒ‡ãƒ¢ã‚·ãƒ•ãƒˆã‚’ä½œæˆ
   - [ ] ã‚·ãƒ•ãƒˆãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆè¡¨ã®ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ã‚·ãƒ•ãƒˆç·¨é›†ï¼ˆæ‹…å½“è€…å¤‰æ›´ï¼‰ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆå‰Šé™¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆå®Ÿéš›ã«ã¯å‰Šé™¤ã—ãªã„ï¼‰

4. **ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ã®ç¢ºèª**
   - [ ] ã€Œã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±è¨­å®šã€ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’é–‹ã
   - [ ] ã€Œæ–°è¦ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] æ–°è¦ã‚¹ã‚¿ãƒƒãƒ•ã‚’è¿½åŠ 
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®ç·¨é›†ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•å‰Šé™¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆå®Ÿéš›ã«ã¯å‰Šé™¤ã—ãªã„ï¼‰

5. **ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ã®ç¢ºèªï¼ˆeditor/viewerã®ã¿ï¼‰**
   - [ ] æ–½è¨­è©³ç´°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] ã€Œãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ãƒ­ãƒ¼ãƒ«é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«ã€Œeditorã€ã€Œviewerã€ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œadminã€ã€Œsuper-adminã€ãŒé¸æŠã§ããªã„ã“ã¨ã‚’ç¢ºèª
   - [ ] editorãƒ­ãƒ¼ãƒ«ã§ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ï¼ˆå®Ÿéš›ã«ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰

6. **ä»–ã®æ–½è¨­ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã®ç¢ºèª**
   - [ ] å·¦ä¸Šã®æ–½è¨­é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‹ã
   - [ ] è‡ªåˆ†ã®æ–½è¨­ï¼ˆã€Œadminæ¤œè¨¼ç”¨æ–½è¨­ã€ï¼‰ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ä»–ã®æ–½è¨­ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…çµæœ

- âœ… ç®¡ç†ç”»é¢ï¼ˆ/adminï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- âœ… è‡ªåˆ†ã®æ–½è¨­ã®ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒã§ãã‚‹
- âœ… è‡ªåˆ†ã®æ–½è¨­ã®ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ãŒã§ãã‚‹
- âœ… ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ï¼ˆeditor/viewerã®ã¿ï¼‰ãŒã§ãã‚‹
- âœ… ä»–ã®æ–½è¨­ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

---

### æ¤œè¨¼3: editoræ¨©é™ã®æ¤œè¨¼

**ç›®çš„**: editorãŒã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãŒã§ãã€ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã¯é–²è¦§ã®ã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

#### å‰ææ¡ä»¶

- [ ] adminã¾ãŸã¯super-adminãŒeditoræ¨©é™ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ‹›å¾…æ¸ˆã¿

#### æ‰‹é †

1. **editorã§ãƒ­ã‚°ã‚¤ãƒ³**
   - [ ] editorã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   - [ ] è‡ªåˆ†ã®æ–½è¨­ãŒè‡ªå‹•çš„ã«é¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

2. **ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ã®ç¢ºèª**
   - [ ] ã€Œã‚·ãƒ•ãƒˆä½œæˆå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ãƒ‡ãƒ¢ã‚·ãƒ•ãƒˆã‚’ä½œæˆ
   - [ ] ã‚·ãƒ•ãƒˆãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆè¡¨ã®ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ã‚·ãƒ•ãƒˆç·¨é›†ï¼ˆæ‹…å½“è€…å¤‰æ›´ï¼‰ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®é–²è¦§ã®ã¿ç¢ºèª**
   - [ ] ã€Œã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±è¨­å®šã€ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’é–‹ã
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œæ–°è¦ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ç·¨é›†ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] å‰Šé™¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

4. **ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã®ç¢ºèª**
   - [ ] æ–½è¨­è©³ç´°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
   - [ ] ã€Œãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª

5. **ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã®ç¢ºèª**
   - [ ] ç”»é¢ä¸Šéƒ¨ã«ã€Œç®¡ç†ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
   - [ ] URLãƒãƒ¼ã«ç›´æ¥ `/admin` ã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…çµæœ

- âœ… ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãŒã§ãã‚‹
- âœ… ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®é–²è¦§ã¯ã§ãã‚‹
- âœ… ã‚¹ã‚¿ãƒƒãƒ•ç·¨é›†ãƒ»å‰Šé™¤ã¯ã§ããªã„
- âœ… ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- âœ… ç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

---

### æ¤œè¨¼4: vieweræ¨©é™ã®æ¤œè¨¼

**ç›®çš„**: viewerãŒã™ã¹ã¦é–²è¦§ã®ã¿ã§ã€ç·¨é›†æ“ä½œãŒæ‹’å¦ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### å‰ææ¡ä»¶

- [ ] adminã¾ãŸã¯super-adminãŒvieweræ¨©é™ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ‹›å¾…æ¸ˆã¿

#### æ‰‹é †

1. **viewerã§ãƒ­ã‚°ã‚¤ãƒ³**
   - [ ] viewerã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   - [ ] è‡ªåˆ†ã®æ–½è¨­ãŒè‡ªå‹•çš„ã«é¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

2. **ã‚·ãƒ•ãƒˆé–²è¦§ã®ç¢ºèª**
   - [ ] ã‚·ãƒ•ãƒˆè¡¨ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆå†…å®¹ãŒé–²è¦§ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ã®æ‹’å¦ç¢ºèª**
   - [ ] ã€Œã‚·ãƒ•ãƒˆä½œæˆå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆè¡¨ã®ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ç·¨é›†æ“ä½œãŒæ‹’å¦ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆç·¨é›†UIãŒè¡¨ç¤ºã•ã‚Œãªã„ã€ã¾ãŸã¯æ“ä½œãŒç„¡åŠ¹ï¼‰

4. **ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®é–²è¦§ã®ã¿ç¢ºèª**
   - [ ] ã€Œã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±è¨­å®šã€ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’é–‹ã
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œæ–°è¦ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ç·¨é›†ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

5. **ã™ã¹ã¦ã®ç·¨é›†æ“ä½œã®æ‹’å¦ç¢ºèª**
   - [ ] ä¼‘æš‡ç”³è«‹ã®è¿½åŠ ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã‚·ãƒ•ãƒˆè¦ä»¶è¨­å®šã®ç·¨é›†ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‹ã€ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

6. **ç®¡ç†ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã®ç¢ºèª**
   - [ ] ç”»é¢ä¸Šéƒ¨ã«ã€Œç®¡ç†ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
   - [ ] URLãƒãƒ¼ã«ç›´æ¥ `/admin` ã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…çµæœ

- âœ… ã‚·ãƒ•ãƒˆé–²è¦§ãŒã§ãã‚‹
- âœ… ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ã¯ã§ããªã„
- âœ… ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®é–²è¦§ã¯ã§ãã‚‹
- âœ… ã‚¹ã‚¿ãƒƒãƒ•ç·¨é›†ãƒ»å‰Šé™¤ã¯ã§ããªã„
- âœ… ã™ã¹ã¦ã®ç·¨é›†æ“ä½œãŒæ‹’å¦ã•ã‚Œã‚‹
- âœ… ç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

---

### æ¤œè¨¼5: æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¤œè¨¼

**ç›®çš„**: æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€Forbiddenãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### å‰ææ¡ä»¶

- [ ] Phase 14.1ã®æ¤œè¨¼2ã§ä½œæˆã—ãŸ2äººç›®ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆæ‹›å¾…ãªã—ï¼‰ã‚’ä½¿ç”¨

#### æ‰‹é †

1. **æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³**
   - [ ] æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
   - [ ] ãƒ­ã‚°ã‚¤ãƒ³ã¯æˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª

2. **Forbiddenãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºç¢ºèª**
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€ã¨ã„ã†ãƒ˜ãƒƒãƒ‡ã‚£ãƒ³ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] ã€Œæ–½è¨­ã¸ã®æ‹›å¾…ã‚’å—ã‘ã‚‹ã‹ã€ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ç®¡ç†ç”»é¢ã¸ã®ãƒªãƒ³ã‚¯éè¡¨ç¤ºç¢ºèª**
   - [ ] ç”»é¢ä¸Šéƒ¨ã«ã€Œç®¡ç†ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
   - [ ] æ–½è¨­é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª

4. **URLã‹ã‚‰ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹è©¦è¡Œ**
   - [ ] URLãƒãƒ¼ã« `/admin` ã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - [ ] URLãƒãƒ¼ã« `/` ã‚’å…¥åŠ›ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹
   - [ ] `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

5. **Firestoreãƒ‡ãƒ¼ã‚¿ç¢ºèª**
   - [ ] Firebase Console > Firestore > users ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹ã
   - [ ] æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–‹ã
   - [ ] `facilities` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç©ºã®é…åˆ— `[]` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…çµæœ

- âœ… ãƒ­ã‚°ã‚¤ãƒ³ã¯æˆåŠŸã™ã‚‹
- âœ… `/forbidden` ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹
- âœ… ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãªã—ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã™ã¹ã¦ã®æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- âœ… Firestoreã® `facilities` é…åˆ—ãŒç©º

---

## ğŸ“Š æ¤œè¨¼çµæœè¨˜éŒ²ã‚·ãƒ¼ãƒˆ

### æ¤œè¨¼æ—¥æ™‚

**å®Ÿæ–½æ—¥**: ___________
**å®Ÿæ–½è€…**: ___________
**ç’°å¢ƒ**: æœ¬ç•ªç’°å¢ƒï¼ˆhttps://ai-care-shift-scheduler.web.appï¼‰

### æ¤œè¨¼çµæœ

| æ¤œè¨¼é …ç›® | çµæœ | å‚™è€ƒ |
|---|---|------|
| æ¤œè¨¼1: super-adminæ¨©é™ | â¬œ åˆæ ¼ / â¬œ ä¸åˆæ ¼ | |
| æ¤œè¨¼2: adminæ¨©é™ | â¬œ åˆæ ¼ / â¬œ ä¸åˆæ ¼ | |
| æ¤œè¨¼3: editoræ¨©é™ | â¬œ åˆæ ¼ / â¬œ ä¸åˆæ ¼ | |
| æ¤œè¨¼4: vieweræ¨©é™ | â¬œ åˆæ ¼ / â¬œ ä¸åˆæ ¼ | |
| æ¤œè¨¼5: æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ | â¬œ åˆæ ¼ / â¬œ ä¸åˆæ ¼ | |

### ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ

| å•é¡Œ | é‡è¦åº¦ | è©³ç´° | å¯¾å¿œäºˆå®š |
|---|---|---|------|
| | â¬œ é«˜ / â¬œ ä¸­ / â¬œ ä½ | | |
| | â¬œ é«˜ / â¬œ ä¸­ / â¬œ ä½ | | |

### ç·åˆè©•ä¾¡

â¬œ å…¨é …ç›®åˆæ ¼ï¼ˆPhase 14.3ã®è¦ä»¶ã‚’æº€ãŸã™ï¼‰
â¬œ ä¸€éƒ¨ä¸åˆæ ¼ï¼ˆä¿®æ­£ãŒå¿…è¦ï¼‰

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: adminãŒsuper-adminæ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹

**åŸå› **: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® `facilities` é…åˆ—ã®ãƒ­ãƒ¼ãƒ«è¨­å®šãŒèª¤ã£ã¦ã„ã‚‹

**ç¢ºèªæ–¹æ³•**:
1. Firebase Console > Firestore > users/{uid} ã‚’ç¢ºèª
2. `facilities` é…åˆ—ã®å„ã‚¨ãƒ³ãƒˆãƒªã® `role` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç¢ºèª

**å¯¾å‡¦æ–¹æ³•**:
1. super-adminã§ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ç”»é¢ã‹ã‚‰adminãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’ä¿®æ­£
3. ã¾ãŸã¯ã€Firestoreã§ç›´æ¥ `role` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¿®æ­£

### å•é¡Œ2: editorãŒã‚¹ã‚¿ãƒƒãƒ•ç·¨é›†ã§ãã¦ã—ã¾ã†

**åŸå› **: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ­ãƒ¼ãƒ«åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ã€ã¾ãŸã¯Firestore Security Rulesã®ä¸å‚™

**ç¢ºèªæ–¹æ³•**:
1. ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
2. Firestore Security Rulesã‚’ç¢ºèªï¼ˆ`.kiro/firestore.rules`ï¼‰

**å¯¾å‡¦æ–¹æ³•**:
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ­ãƒ¼ãƒ«åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¿®æ­£
2. Firestore Security Rulesã‚’ä¿®æ­£ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤

### å•é¡Œ3: viewerãŒã‚·ãƒ•ãƒˆä½œæˆãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹

**åŸå› **: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼

**ç¢ºèªæ–¹æ³•**:
1. React Contextã® `currentUserRole` ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ `currentUserRole === 'viewer'` ã®ãƒã‚§ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèª

**å¯¾å‡¦æ–¹æ³•**:
1. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ãƒ¼ãƒ«åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¿®æ­£
2. ã¾ãŸã¯ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 

---

## ğŸ“ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **Phase 14.3è¨­è¨ˆæ›¸**: `.kiro/specs/auth-data-persistence/phase14-3-rbac-e2e-design-2025-11-02.md`
- **Phase 14ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: `.kiro/specs/auth-data-persistence/phase14-status-2025-11-01.md`
- **Phase 14.1æ‰‹å‹•ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰**: `.kiro/specs/auth-data-persistence/phase14-1-auth-flow-manual-test-guide-2025-11-02.md`
- **ä»•æ§˜æ›¸**: `.kiro/specs/auth-data-persistence/requirements.md` - Requirements 2.1-2.15, 12.1-12.18
- **ã‚¿ã‚¹ã‚¯**: `.kiro/specs/auth-data-persistence/tasks.md` - Phase 14.3

---

**ä½œæˆæ—¥**: 2025å¹´11æœˆ2æ—¥
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: æœ¬ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦æ‰‹å‹•æ¤œè¨¼ã‚’å®Ÿæ–½ã—ã€çµæœã‚’è¨˜éŒ²ã™ã‚‹
