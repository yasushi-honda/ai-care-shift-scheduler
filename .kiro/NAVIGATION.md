# ğŸ“š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€AIã‚·ãƒ•ãƒˆè‡ªå‹•ä½œæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ç´¢å¼•ã§ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

| ç›®çš„ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
|-----|------------|
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ã‚’çŸ¥ã‚ŠãŸã„ | [`README.md`](../README.md) |
| é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã—ãŸã„ | [`README.md`](../README.md) - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ |
| ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ãŸã„ | [`README.md`](../README.md) - ãƒ†ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ |
| ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ | [`.github/workflows/ci.yml`](../.github/workflows/ci.yml) |
| è¨­è¨ˆæ±ºå®šã‚’ç¢ºèªã—ãŸã„ | [`docs/adr/`](../docs/adr/README.md) |

---

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ï¼ˆSteeringï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ–¹é‡ãƒ»æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãƒ»æ§‹é€ ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [`steering/product.md`](steering/product.md) | ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ“ã‚¸ãƒ§ãƒ³ã€ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ |
| [`steering/tech.md`](steering/tech.md) | æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š |
| [`steering/structure.md`](steering/structure.md) | ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ |
| [`steering/gemini-rules.md`](steering/gemini-rules.md) | Gemini APIè¨­å®šãƒ«ãƒ¼ãƒ«ï¼ˆæœ€é‡è¦ï¼‰ |
| [`steering/permission-rules.md`](steering/permission-rules.md) | æ¨©é™ç®¡ç†ãƒ«ãƒ¼ãƒ« |
| [`steering/implementation-log-index.md`](steering/implementation-log-index.md) | å®Ÿè£…ãƒ­ã‚°ç›®æ¬¡ |

---

## ğŸ“ Architecture Decision Records (ADR)

é‡è¦ãªè¨­è¨ˆåˆ¤æ–­ã®è¨˜éŒ²

| ADR | ã‚¿ã‚¤ãƒˆãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-----|---------|----------|
| [0001](../docs/adr/0001-gemini-sdk-and-config.md) | Gemini SDKé¸æŠã¨è¨­å®šãƒ«ãƒ¼ãƒ« | æ¡ç”¨ |
| [0002](../docs/adr/0002-permission-dual-sync.md) | æ¨©é™ãƒ‡ãƒ¼ã‚¿ã®åŒæ–¹å‘åŒæœŸæ§‹é€  | æ¡ç”¨ |
| [0003](../docs/adr/0003-constraint-checkers-extraction.md) | åˆ¶ç´„ãƒã‚§ãƒƒã‚«ãƒ¼ã®è²¬å‹™åˆ†é›¢ | æ¡ç”¨ |

---

## ğŸ¯ æ©Ÿèƒ½ä»•æ§˜ï¼ˆSpecsï¼‰

å€‹åˆ¥æ©Ÿèƒ½ã®è¦ä»¶ãƒ»è¨­è¨ˆãƒ»å®Ÿè£…ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### âœ… Auth Data Persistenceï¼ˆèªè¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼‰ï¼ˆPhase 0-13å®Œäº†ï¼‰

**ç›®çš„**: äº‹æ¥­æ‰€å˜ä½ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆã€Google OAuthèªè¨¼ã€RBACã€ç›£æŸ»ãƒ­ã‚°

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [`specs/auth-data-persistence/requirements.md`](specs/auth-data-persistence/requirements.md) | å…¨è¦ä»¶ã®è©³ç´°å®šç¾© |
| [`specs/auth-data-persistence/design.md`](specs/auth-data-persistence/design.md) | æŠ€è¡“è¨­è¨ˆã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ |
| [`specs/auth-data-persistence/tasks.md`](specs/auth-data-persistence/tasks.md) | å®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼ˆPhase 0-13å®Œäº†ï¼‰ |
| [`specs/auth-data-persistence/phase13-completion-summary-2025-11-01.md`](specs/auth-data-persistence/phase13-completion-summary-2025-11-01.md) | **Phase 13å®Œäº†ã‚µãƒãƒªãƒ¼** ğŸ“Š |
| [`specs/auth-data-persistence/phase13-diagram-2025-11-01.md`](specs/auth-data-persistence/phase13-diagram-2025-11-01.md) | **Phase 13æ§‹é€ å›³ï¼ˆMermaidï¼‰** ğŸ“ˆ |
| [`specs/auth-data-persistence/phase0-verification-2025-10-31.md`](specs/auth-data-persistence/phase0-verification-2025-10-31.md) | Phase 0æ¤œè¨¼è¨˜éŒ² |
| [`specs/auth-data-persistence/deployment-summary.md`](specs/auth-data-persistence/deployment-summary.md) | ãƒ‡ãƒ—ãƒ­ã‚¤ã‚µãƒãƒªãƒ¼ |
| [`specs/auth-data-persistence/spec.json`](specs/auth-data-persistence/spec.json) | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ |

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Phase 0-13å®Œäº†ï¼ˆ2025-11-01ï¼‰
**ãƒ†ã‚¹ãƒˆçµæœ**: 48/48ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæˆåŠŸã€100%æˆåŠŸç‡
**ã‚«ãƒãƒ¬ãƒƒã‚¸**: Phase 13ã‚µãƒ¼ãƒ“ã‚¹ 79-92% statements, 100% functions

---

### âœ… AI Shift Integration Testï¼ˆå®Œäº†ï¼‰

**ç›®çš„**: AIã‚·ãƒ•ãƒˆç”Ÿæˆæ©Ÿèƒ½ã®å‹•ä½œã‚’åŒ…æ‹¬çš„ã«ãƒ†ã‚¹ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [`specs/ai-shift-integration-test/requirements.md`](specs/ai-shift-integration-test/requirements.md) | 9è¦ä»¶ã®è©³ç´°å®šç¾© |
| [`specs/ai-shift-integration-test/design.md`](specs/ai-shift-integration-test/design.md) | æŠ€è¡“è¨­è¨ˆã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ |
| [`specs/ai-shift-integration-test/tasks.md`](specs/ai-shift-integration-test/tasks.md) | å®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼ˆ7/7å®Œäº†ï¼‰ |
| [`specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md`](specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md) | **å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ** ğŸ“Š |
| [`specs/ai-shift-integration-test/spec.json`](specs/ai-shift-integration-test/spec.json) | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ |

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Ÿè£…å®Œäº†ï¼ˆ2025-10-23ï¼‰
**ãƒ†ã‚¹ãƒˆçµæœ**: 37/37çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸã€100%æˆåŠŸç‡

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend (React + TypeScript)
  â”œâ”€ src/
  â”‚   â”œâ”€ App.tsx              - ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  â”‚   â”œâ”€ components/          - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  â”‚   â””â”€ services/
  â”‚       â””â”€ geminiService.ts - Cloud Functions APIå‘¼ã³å‡ºã—
  â”‚
  â””â”€ e2e/                     - Playwrightãƒ†ã‚¹ãƒˆï¼ˆE2Eï¼‰

Backend (Cloud Functions + Vertex AI)
  â”œâ”€ functions/src/
  â”‚   â”œâ”€ index.ts             - ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
  â”‚   â”œâ”€ shift-generation.ts  - AIã‚·ãƒ•ãƒˆç”Ÿæˆï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
  â”‚   â”œâ”€ phased-generation.ts - æ®µéšçš„ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
  â”‚   â””â”€ types.ts             - å‹å®šç¾©
  â”‚
  â””â”€ functions/__tests__/     - Jestçµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ37ãƒ†ã‚¹ãƒˆï¼‰

Infrastructure
  â”œâ”€ Firebase Hosting         - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
  â”œâ”€ Cloud Functions Gen 2    - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
  â”œâ”€ Firestore               - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
  â””â”€ Vertex AI               - Gemini 2.5 Flash-Lite
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆé–¢é€£

| ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | å ´æ‰€ | å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------------|------|------------|-----------|
| **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰** | `src/services/__tests__/` | `npm run test:unit` | âœ… 48/48åˆæ ¼ (100%) |
| çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆJestï¼‰ | `functions/__tests__/integration/` | `cd functions && npm run test:integration` | âœ… 37/37åˆæ ¼ (100%) |
| E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰ | `e2e/` | `npx playwright test` | â³ å¾Œå›ã— |
| CI/CD | `.github/workflows/ci.yml` | è‡ªå‹•å®Ÿè¡Œï¼ˆpushæ™‚ï¼‰ | âœ… ç¨¼åƒä¸­ |

**è©³ç´°**: [`README.md`](../README.md) - ğŸ§ª ãƒ†ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³

**ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**:
- `auditLogService`: 81% statements, 100% functions
- `securityAlertService`: 79% statements, 100% functions
- `anomalyDetectionService`: 93% statements, 100% functions
- `staffService`: 66% statements, 88% functions
- `scheduleService`: 18% statements, 29% functionsï¼ˆè¦æ”¹å–„ï¼‰

---

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|---------|------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | React 19, TypeScript 5.8, Vite 6 |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Node.js 20, Cloud Functions Gen 2 |
| **AI** | Vertex AI Gemini 2.5 Proï¼ˆasia-northeast1ï¼‰ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | Firestore |
| **ãƒ†ã‚¹ãƒˆ** | Jest, Playwright, Supertest |
| **CI/CD** | GitHub Actions, Firebase CLI |

**è©³ç´°**: [`steering/tech.md`](steering/tech.md)

---

## ğŸ“ é‡è¦ãªæŠ€è¡“çš„æ±ºå®š

### Gemini ãƒ¢ãƒ‡ãƒ«ã¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³

âš ï¸ **CRITICAL**: ä»¥ä¸‹ã®è¨­å®šã¯å¤‰æ›´ã—ãªã„ã“ã¨

- **SDK**: `@google/genai` ï¼ˆ`@google-cloud/vertexai`ã¯ä½¿ç”¨ç¦æ­¢ï¼‰
- **ãƒ¢ãƒ‡ãƒ«å**: `gemini-2.5-pro` ï¼ˆthinkingå¸¸æ™‚ONã€å®‰å®šå‹•ä½œï¼‰
- **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: `asia-northeast1` ï¼ˆæ—¥æœ¬å›½å†…ãƒ‡ãƒ¼ã‚¿å‡¦ç†è¦ä»¶ï¼‰
- **maxOutputTokens**: `65536` ï¼ˆæ€è€ƒ+å‡ºåŠ›ã®åˆè¨ˆä¸Šé™ï¼‰

**è©³ç´°**: [`steering/gemini-rules.md`](steering/gemini-rules.md)ã€[ADR-0001](../docs/adr/0001-gemini-sdk-and-config.md)

### æ®µéšçš„ç”Ÿæˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

å¤§è¦æ¨¡ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆ11åä»¥ä¸Šï¼‰ã«å¯¾ã—ã¦2æ®µéšç”Ÿæˆã‚’å®Ÿæ–½ï¼š

1. **Phase 1**: éª¨å­ç”Ÿæˆï¼ˆä¼‘æ—¥ãƒ»å¤œå‹¤ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
2. **Phase 2**: è©³ç´°ç”Ÿæˆï¼ˆ10å/ãƒãƒƒãƒï¼‰

**è©³ç´°**: [`specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md`](specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md) - èª²é¡Œ3

---

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®å‚ç…§å…ˆï¼š

1. **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼**: [`README.md`](../README.md) - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³
2. **AIç”Ÿæˆã‚¨ãƒ©ãƒ¼**: [`specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md`](specs/ai-shift-integration-test/IMPLEMENTATION_COMPLETE.md) - æŠ€è¡“çš„èª²é¡Œã‚»ã‚¯ã‚·ãƒ§ãƒ³
3. **ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¨ãƒ©ãƒ¼**: [`.github/workflows/ci.yml`](../.github/workflows/ci.yml) ã®ãƒ­ã‚°ç¢ºèª

---

## ğŸ“ æ–°è¦é–‹ç™ºè€…å‘ã‘ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

### 1æ—¥ç›®: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç†è§£

1. [`README.md`](../README.md) ã‚’èª­ã‚€ï¼ˆ15åˆ†ï¼‰
2. [`steering/product.md`](steering/product.md) ã§ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’ç†è§£ï¼ˆ10åˆ†ï¼‰
3. [`steering/tech.md`](steering/tech.md) ã§æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’æŠŠæ¡ï¼ˆ10åˆ†ï¼‰
4. æœ¬ç•ªç’°å¢ƒã‚’è§¦ã‚‹: https://ai-care-shift-scheduler.web.app ï¼ˆ10åˆ†ï¼‰

### 2æ—¥ç›®: é–‹ç™ºç’°å¢ƒæ§‹ç¯‰

1. [`README.md`](../README.md) ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã«å¾“ã†ï¼ˆ30åˆ†ï¼‰
2. ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆ5åˆ†ï¼‰
3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ`npm run test:integration`ï¼‰ï¼ˆ5åˆ†ï¼‰

### 3æ—¥ç›®: ã‚³ãƒ¼ãƒ‰ç†è§£

1. [`specs/ai-shift-integration-test/design.md`](specs/ai-shift-integration-test/design.md) ã§ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ï¼ˆ20åˆ†ï¼‰
2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰èª­è§£ï¼ˆ`src/App.tsx`, `services/geminiService.ts`ï¼‰ï¼ˆ30åˆ†ï¼‰
3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰èª­è§£ï¼ˆ`functions/src/shift-generation.ts`ï¼‰ï¼ˆ30åˆ†ï¼‰

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- **GitHub Issues**: https://github.com/yasushi-honda/ai-care-shift-scheduler/issues
- **ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/yasushi-honda/ai-care-shift-scheduler

---

**æœ€çµ‚æ›´æ–°**: 2025-01-23
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.2
**ãƒ¡ãƒ³ãƒ†ãƒŠ**: é–‹ç™ºãƒãƒ¼ãƒ 
