# A/B比較レポート: LLM版 vs CP-SAT Solver版

**生成日時**: 2026-02-14
**テスト条件**: 5名 x 31日 / 各5回実行

---

## 1. エグゼクティブサマリー

CP-SAT Solver版はLLM版と比較して、**スコア+28点**、**処理時間99%削減**を達成。
全実行でLevel 1違反ゼロ、完全な決定性を実現し、PoC成功基準を満たした。

## 2. スコア比較

| 指標 | LLM版 | Solver版 | 差分 |
|------|-------|---------|------|
| 平均スコア | 72 | 100 | **+28** |
| 最低スコア | 52 | 100 | +48 |
| 最高スコア | 88 | 100 | +12 |
| スコア分散 | 196.0 | 0.0 | -196.0 |
| 各回スコア | [76, 88, 64, 80, 52] | [100, 100, 100, 100, 100] | - |

## 3. 制約違反比較

| 指標 | LLM版 | Solver版 | 差分 |
|------|-------|---------|------|
| Level 1違反（労基法） | 2件 | 0件 | **-2件** |
| Level 2違反（人員不足） | 9件 | 0件 | -9件 |
| Level 1詳細 | [0, 0, 1, 0, 1] | [0, 0, 0, 0, 0] | - |
| Level 2詳細 | [2, 1, 2, 1, 3] | [0, 0, 0, 0, 0] | - |

## 4. 処理時間比較

| 指標 | LLM版 | Solver版 | 改善率 |
|------|-------|---------|--------|
| 平均処理時間 | 122.5秒 | 1.028秒 | **99.2%削減** |
| 各回（ms） | [125.3, 98.7, 145.2, 110.5, 132.8]s | [869, 956, 922, 1525, 868]ms | - |
| 速度比 | 1x | **119x** | - |

## 5. 決定性（再現性）

| 指標 | LLM版 | Solver版 |
|------|-------|---------|
| 決定性 | 非決定的（確率的） | **完全決定的** |
| スコア分散 | 196.0 | 0.0 |
| 同一入力→同一出力 | No | **Yes** |

## 6. シフト配分比較（代表例）

### LLM版

| スタッフ | 早番 | 日勤 | 遅番 | 夜勤 | 休 | 明け休み |
|---------|------|------|------|------|-----|---------|
| 田中太郎 | 5 | 7 | 5 | 2 | 8 | 4 |
| 佐藤花子 | 8 | 6 | 9 | 0 | 8 | 0 |
| 鈴木一郎 | 7 | 8 | 8 | 0 | 8 | 0 |
| 高橋美咲 | 3 | 12 | 8 | 0 | 8 | 0 |
| 伊藤健太 | 9 | 6 | 8 | 0 | 8 | 0 |

### Solver版

| スタッフ | 早番 | 日勤 | 遅番 | 夜勤 | 休 | 明け休み |
|---------|------|------|------|------|-----|---------|
| 田中太郎 | 7 | 7 | 7 | 2 | 4 | 4 |
| 佐藤花子 | 8 | 7 | 8 | 0 | 8 | 0 |
| 鈴木一郎 | 8 | 7 | 8 | 0 | 8 | 0 |
| 高橋美咲 | 0 | 23 | 0 | 0 | 8 | 0 |
| 伊藤健太 | 8 | 7 | 8 | 0 | 8 | 0 |

## 7. コスト比較

| 指標 | LLM版 | Solver版 |
|------|-------|---------|
| 入力トークン/回 | ~28,500 | 0 |
| 出力トークン/回 | ~12,300 | 0 |
| API費用/回 | ~$0.15 | $0.00 |
| 計算リソース | Cloud Functions (Node.js) | Cloud Functions (Python) |

## 8. PoC成功基準判定

| 基準 | 目標 | Solver結果 | 判定 |
|------|------|-----------|------|
| スコア安定性 | 全回80以上 | 最低100 | PASS |
| Level 1違反 | 0件 | 0件 | PASS |
| 処理時間 | <10秒 | 1.028秒 | PASS |
| 決定性 | 完全決定的 | 分散0.0 | PASS |

**総合判定: ALL PASS - ADR-0004ステータスを「採用」に変更推奨**

## 9. 結論

CP-SAT Solverへの移行により以下の改善が見込まれる:

1. **品質向上**: 平均スコア 72 → 100（+28点）
2. **速度改善**: 122.5秒 → 1.028秒（99.2%削減）
3. **信頼性**: Level 1違反ゼロを数学的に保証
4. **再現性**: 同一入力に対し常に同一出力
5. **コスト**: LLM APIトークン消費ゼロ
